
<%- include ("partials/header.ejs") %>



<div id="carouselExample" class="carousel slide" data-bs-ride="carousel">
    <div class="carousel-inner">
        <h1>The Website lives</h1>
      <div class="carousel-item active">
        <img src="/images/DSC01706-300x200.jpg" class="d-block w-100" alt="...">
      </div>
      <div class="carousel-item">
        <img src="/images/E.M-4-Noussair-300x225.jpg" class="d-block w-100" alt="...">
      </div>
      <div class="carousel-item">
        <img src="/images/E.M-5-K-Rukera-300x225.jpg" class="d-block w-100" alt="...">
      </div>
    </div>
    <button class="carousel-control-prev" type="button" data-bs-target="#carouselExample" data-bs-slide="prev">
      <span class="carousel-control-prev-icon" aria-hidden="true"></span>
      <span class="visually-hidden">Previous</span>
    </button>
    <button class="carousel-control-next" type="button" data-bs-target="#carouselExample" data-bs-slide="next">
      <span class="carousel-control-next-icon" aria-hidden="true"></span>
      <span class="visually-hidden">Next</span>
    </button>
  </div>
  <div class="card-container">
  <div class="card" >
    <img src="/images/cinema.jpg" class="card-img-top" alt="...">
    <div class="card-body">
      <h5 class="card-title">Cinema</h5>
      <p class="card-text">Some quick example text to build on the card title and make up the bulk of the card's content.</p>
      <button type="button" class="btn btn-primary show-category-btn" data-show-type="cinema">View Movies</button>
    </div>
  </div>
  <div class="card" >
    <img src="/images/shows.jpg" class="card-img-top" alt="...">
    <div class="card-body">
      <h5 class="card-title">Shows</h5>
      <p class="card-text">Some quick example text to build on the card title and make up the bulk of the card's content.</p><button type="button" class="btn btn-primary show-category-btn" data-show-type="show">View Shows</button>
      </div>
  </div>
  <div class="card">
    <img src="/images/workshop.jpg" class="card-img-top" alt="...">
    <div class="card-body">
      <h5 class="card-title">Workshops</h5>
      <p class="card-text">Some quick example text to build on the card title and make up the bulk of the card's content.</p>
       <button type="button" class="btn btn-primary show-category-btn" data-show-type="workshop">View Workshops</button>
    </div>
  </div>
  <div class="card">
    <img src="/images/kids.jpg" class="card-img-top" alt="...">
    <div class="card-body">
      <h5 class="card-title">See what we have for your kids</h5>
      <p class="card-text">Some quick example text to build on the card title and make up the bulk of the card's content.</p>
      <% %>
      <button type="button" class="btn btn-outline-info age-filter-btn"  data-min-age="0" data-max-age="3">Below 4</button>
                        <button type="button" class="btn btn-outline-info age-filter-btn" data-min-age="4" data-max-age="7">Age 4-7</button>
                        <button type="button" class="btn btn-outline-info age-filter-btn" data-min-age="8" data-max-age="999">Above 7</button>
                    </div>
    </div>
  </div>
</div>


<script>
    

        // --- Fix: Search buttons not working ---
        const allFilterButtons = document.querySelectorAll('.show-category-btn, .age-filter-btn');

        allFilterButtons.forEach(button => {
            button.addEventListener('click', () => {
                const showType = button.dataset.showType || '';
                const minAge = button.dataset.minAge || '';
                const maxAge = button.dataset.maxAge || '';

                // Start URL with /events
                let url = `/events`;
                const params = [];

                // Add showType if it's not empty
                if (showType !== '') {
                    params.push(`type=${encodeURIComponent(showType)}`);
                }

                // Append age parameters if they exist on the clicked button
                if (minAge !== '') {
                    params.push(`min_age=${encodeURIComponent(minAge)}`);
                }
                if (maxAge !== '') {
                    params.push(`max_age=${encodeURIComponent(maxAge)}`);
                }

                // Join parameters with '&' and prepend '?' if there are any
                if (params.length > 0) {
                    url += `?${params.join('&')}`;
                }
                
                // For debugging, console.log the URL before redirecting
                console.log("Redirecting to:", url);
                window.location.href = url;
            });
        });

</script>

<%- include ("partials/footer.ejs") %>